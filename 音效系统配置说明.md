# 音效系统配置说明

## 音效文件检查结果

### ✅ 音效文件完整可用
项目中的音效文件已确认完整：
- **特殊牌音效**：`assets/voice/剪辑.wav` (1.22 MB) ✅
- **配对成功音效**：`assets/voice/欢快音效2（配对成功）.wav` (166.06 KB) ✅  
- **通关音效**：`assets/voice/欢快音效1（通关）.wav` (361.37 KB) ✅
- **普通加分音效**：`assets/voice/短促音效（加分）.wav` (39.11 KB) ✅

## 代码实现状态

### ✅ 音效系统已集成到GameManager.ts
已成功添加以下功能：

1. **音效属性定义**：
   - `scoreAudio`: 普通加分音效（翻牌时播放）
   - `matchAudio`: 配对成功音效
   - `specialAudio`: 特殊牌音效
   - `victoryAudio`: 通关音效

2. **音效播放方法**：
   - `playAudio()`: 通用音效播放方法
   - `playScoreAudio()`: 播放翻牌音效
   - `playMatchAudio()`: 播放配对成功音效
   - `playSpecialAudio()`: 播放特殊牌音效
   - `playVictoryAudio()`: 播放通关音效

3. **音效触发时机**：
   - **翻牌时**：播放普通加分音效（立即播放）
   - **配对成功时**：播放配对成功音效（延时0.5秒）
   - **特殊牌触发时**：播放特殊牌音效（立即播放）
   - **游戏通关时**：播放通关音效（延时0.5秒）

## 编辑器配置步骤

### 1. 创建AudioSource节点（重要：先创建节点）

**必须先创建AudioSource节点，然后才能配置GameManager**

1. 打开 `GameScence.scene` 场景
2. 在场景层级面板中右键 → 创建空节点
3. 为节点命名（如：ScoreAudio、MatchAudio、SpecialAudio、VictoryAudio）
4. 选中节点，在Inspector面板中点击"添加组件" → Audio → AudioSource

### 2. 配置AudioSource组件

对于每个AudioSource节点：
1. 在资源管理器中找到 `assets/voice/` 目录下的对应音效文件
2. 将音效文件拖拽到AudioSource组件的"AudioClip"属性中
3. 设置适当的音量（建议0.5-0.8）、循环等参数

### 3. 配置GameManager节点

1. 选择 GameManager 节点
2. 在 Inspector 面板中设置以下音效属性：

   - **scoreAudio**: 拖入刚才创建的ScoreAudio节点
   - **matchAudio**: 拖入MatchAudio节点
   - **specialAudio**: 拖入SpecialAudio节点
   - **victoryAudio**: 拖入VictoryAudio节点

## 音效播放逻辑

### 翻牌音效（scoreAudio）
- **触发时机**：每次玩家翻开一张卡片时
- **对应文件**：`短促音效（加分）.wav`
- **播放位置**：`onCardFlipped()` 方法中
- **延时设置**：立即播放

### 配对成功音效（matchAudio）
- **触发时机**：两张相同卡片成功配对时
- **对应文件**：`欢快音效2（配对成功）.wav`
- **播放位置**：`checkMatch()` 方法中（配对成功分支）
- **延时设置**：延时0.5秒播放

### 特殊牌音效（specialAudio）
- **触发时机**：玩家点击特殊牌触发特殊效果时
- **对应文件**：`剪辑.wav`
- **播放位置**：`triggerSpecialCardEffect()` 方法中
- **延时设置**：立即播放

### 通关音效（victoryAudio）
- **触发时机**：游戏通关（所有普通卡片配对完成）时
- **对应文件**：`欢快音效1（通关）.wav`
- **播放位置**：`checkGameEnd()` 方法中
- **延时设置**：延时0.5秒播放

## 注意事项

1. **音效文件路径**：所有音效文件位于 `assets/voice/` 目录下
2. **配置顺序**：必须先创建AudioSource节点并配置好音效文件，再拖拽到GameManager
3. **拖拽方式**：从层级面板拖拽AudioSource节点到GameManager的属性中，不是从资源管理器
4. **音效测试**：配置完成后建议测试每个音效是否正常播放
5. **音量调整**：可以根据需要调整每个AudioSource的音量大小（建议0.5-0.8）
6. **延时设置**：配对成功和通关音效有0.5秒延时，其他音效立即播放

## 故障排除

如果音效不播放，请检查：
1. AudioSource 组件是否正确配置
2. 音效文件是否已正确导入项目
3. GameManager 节点上的音效属性是否已正确设置
4. 音效文件格式是否支持（.wav 格式通常支持）

音效系统现已完整可用，只需在编辑器中完成最后的配置即可正常使用。