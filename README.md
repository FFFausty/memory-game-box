00# 经典游戏盒 - 需求文档

## 项目概述

**项目名称**: 经典游戏盒 (memory-game-box)  
**游戏类型**: 益智类记忆匹配游戏  
**开发引擎**: Cocos Creator 3.8 + Blender  
**目标平台**: 微信小程序、WebGL、移动端  
**项目位置**: `c:\Users\Faust\source\game2-demo`
**GitHub仓库**: https://github.com/FFFausty/memory-game-box

## 技术架构优势

### Cocos Creator 优势
- **轻量化**: 包体更小，微信小程序原生支持
- **高性能**: TypeScript开发，热重载提升开发效率
- **跨平台**: 一次开发，多平台发布
- **生态完善**: 丰富的插件市场和社区支持

### Blender 应用场景
- **3D卡片动画**: 制作流畅的卡片翻转3D效果
- **UI特效**: 设计现代化的3D UI元素
- **资源优化**: 轻量化的模型和动画导出

## 游戏核心玩法

### 项目扩展规划

#### 游戏合集架构
- **核心游戏**: 神经衰弱记忆游戏（已实现）
- **扩展游戏**: 预留其他经典游戏集成空间
- **统一入口**: 游戏盒主界面，支持多游戏切换
- **进度同步**: 跨游戏成就和进度系统

### 版本更新（2025-11-03）

- 已删除“难度选择”入口与相关交互，游戏难度固定为难度1（25张：12对 + 1张特殊牌）。
- 新增“模式选择”入口（主菜单）：提供“单机”（默认）、“AI对战”、“本地联机”三种模式，样式与原难度选择一致（入口卡片右侧浮层列表）。
- 代码调整：`GameManager` 固定25张机制；`MainMenu` 增加 `GameMode` 并写入全局 `window.selectedMode`；`UIManager` 移除难度按钮与回调。

### 游戏模式设计

#### 1. 单机模式
- **经典模式**: 玩家独自完成记忆匹配挑战
- **计时挑战**: 在规定时间内完成匹配（5分钟速通模式，适配碎片化时间）
- **步数限制**: 用最少的步数完成游戏
- **成就挑战**: 解锁特定成就的专属挑战关卡

#### 2. AI对战模式
- **智能AI对手系统**: 
  - 具备不同难度级别（简单、中等、困难）
  - AI记忆策略：随机、模式记忆、完美记忆
  - 回合制对战，轮流翻开卡片
  - AI会根据玩家表现动态调整策略（自适应难度）
  - AI对话系统：AI对手会根据游戏进程进行趣味对话
  - 战绩记录：保存与AI对战的历史记录和胜率统计

### 难度系统设计

#### 难度级别定义（共用同一套难度设计）

**难度1：嗜血观众**
- **卡片数量**: 25张（12对 + 1张恶魔牌）
- **图案主题**: Emoji表情为主
- **配对规则**: 
  - 相同Emoji表情成对
  - 包含一张单独的恶魔牌（无配对）
  - 恶魔牌作为干扰项，增加记忆难度
- **挑战特点**: 需要记住恶魔牌位置，避免无效翻牌

**难度2：同色扑克**
- **卡片数量**: 54张（26对 + 2张小丑牌）
- **图案主题**: 经典扑克牌设计
- **配对规则**:
  - 同色同号成对（如：黑桃Q-梅花Q，方块3-红心3）
  - 小丑牌成对（2张小丑牌互相匹配）
  - 花色区分：黑桃♠、红心♥、梅花♣、方块♦
- **挑战特点**: 需要区分花色，增加视觉辨识难度

**难度3-5：预留扩展空间**
- **难度3**: 待定（可设计为72张，复杂图案组合）
- **难度4**: 待定（可设计为100张，动态变化图案）
- **难度5**: 待定（可设计为144张，极限记忆挑战）

## 游戏规则详解

### 基本游戏规则
1. **游戏目标**: 找出所有常规卡片的匹配对，完成配对即可结束游戏
2. **游戏机制**: 
   - 所有卡片背面朝上随机排列在游戏区域
   - 玩家每次翻开两张卡片
   - 如果两张卡片匹配，则保持翻开状态并计分
   - 如果不匹配，则翻回背面
   - 游戏结束条件：所有常规卡片配对完成

### 特殊卡片规则设计

#### 特殊卡片类型
1. **恶魔/天使牌（难度1：嗜血观众）**
   - 数量：1张（无配对）
   - 性质：干扰性特殊卡片，具有AI对话功能
   
2. **鬼牌（难度2：同色扑克）**
   - 数量：2张（互相配对）
   - 性质：奖励性特殊卡片，具有动态提示功能

#### 特殊牌机制设计方案（开局随机选择）

游戏开局时随机选择以下两种规则之一，增加游戏的可变性和重玩价值：

**方案一：增益规则（天使/酒神教皇规则）**

**难度1：嗜血观众（25张牌）**
- **特殊牌类型**：天使牌（1张，无配对）
- **效果机制**：
  - 翻开天使牌时，立即提示一对未配对的常规牌的位置（高亮显示5秒）
  - 天使牌翻开后保持正面，不再翻回背面
  - 每局游戏只能使用1次天使牌效果
  - AI对话："天使降临！让我来帮你找到注定的位置吧！"

**难度2：同色扑克（54张牌）**
- **特殊牌类型**：酒神牌（大鬼牌）+ 教皇牌（小鬼牌），共2张互相配对
- **效果机制**：
  - **配对奖励**：成功匹配酒神-教皇对时，立即获得10分额外奖励
  - **单张效果**：翻开任意一张特殊牌时，揭示周围上下左右（如果有）的牌面2秒
  - **战略价值**：特殊牌配对难度较高，但奖励丰厚
  - AI对话："恩典还是狂欢？丰收将至！"

**方案二：减益规则（恶魔/鬼牌规则）**

**难度1：嗜血观众（25张牌）**
- **特殊牌类型**：恶魔牌（1张，无配对）
- **效果机制**：
  - **记忆干扰**：翻开恶魔牌时，随机翻转2-3对已配对的常规牌回到背面
  - **时间惩罚**：恶魔牌翻开后，减少玩家剩余时间15秒
  - **视觉干扰**：恶魔牌翻开期间，所有未配对牌面会轻微抖动干扰视线
  - **战略风险**：恶魔牌必须谨慎处理，避免过早触发惩罚
  - AI对话："恶魔降临！你的记忆将受到考验！"

**难度2：同色扑克（54张牌）**
- **特殊牌类型**：鬼牌（大小鬼牌），共2张互相配对
- **效果机制**：
  - **致命配对**：成功配对鬼牌对时，立即输掉当前游戏
  - **位置干扰**：翻开任意一张鬼牌时，打乱当前所有未翻开牌的排序
  - **高风险高回报**：鬼牌配对虽然致命，但成功避开可获得成就奖励
  - **记忆挑战**：每次翻开鬼牌都需重新记忆牌面位置
  - AI对话："哈哈哈哈哈！"

#### 规则选择与平衡机制
- **开局随机**：每局游戏开始时随机选择增益或减益规则
- **规则提示**：游戏开始前显示当前生效的特殊规则类型
- **成就系统**：分别统计在两种规则下的游戏表现和成就
- **平衡设计**：减益规则下基础分数加成更高，补偿游戏难度

#### 情绪曲线设计优化
- **增益规则爽点**：天使牌提示带来及时帮助，酒神教皇奖励丰厚
- **减益规则挑战**：恶魔牌惩罚增加紧张感，鬼牌致命配对带来刺激
- **动态难度**：规则随机性确保每局游戏体验不同
- **策略深度**：玩家需要根据当前规则调整游戏策略

### AI对战模式特殊规则
- **回合制**: 玩家和AI轮流操作，每人每回合翻开两张卡片
- **得分机制**: 
  - 常规匹配：获得基础分数（10分）
  - 特殊匹配：获得额外奖励分数
  - 特殊卡片使用：消耗行动点，但获得战略优势
- **胜利条件**: 
  - 先完成所有常规卡片配对的一方获胜
  - 或者游戏时间结束时，分数高的一方获胜
- **时间限制**: 每回合操作时间限制（15秒）
- **AI难度分级**: 根据AI难度设置不同的思考时间和策略复杂度

### 游戏特色
- **渐进式难度系统**: 从简单到复杂的卡片数量递增
- **智能AI系统**: 具备学习能力的AI对手，支持多种难度级别
- **个性化评分**: 基于时间、步数、准确率的综合评分
- **成就系统**: 解锁不同难度和模式的成就
- **AI对战体验**: 与智能AI进行策略性对战，提升记忆挑战

## 用户体验设计

### 3.1 情绪曲线设计

#### 3.1.1 爽点强化机制
- **连击奖励**: 连续成功匹配3对卡片后触发"连击奖励"，角色短暂发光特效，获得额外分数加成
- **成就解锁**: 完成特定挑战（如"10秒内匹配3对"）解锁专属成就和特效
- **视觉反馈**: 匹配成功时卡片发光+粒子特效，增强即时满足感

#### 3.1.2 痛点规避策略
- **动态提示系统**: 单局失败次数≥3次时，AI自动提供"提示券"（每日限3次）
- **失败保护**: 连续失败时显示"高玩回放"，学习优秀玩家操作路径
- **难度自适应**: 根据玩家历史表现动态调整卡片布局复杂度

### 3.2 AI互动优化

#### 3.2.1 NPC角色化设计
- **恶魔牌AI**: 赋予"调皮捣蛋"性格，翻开时触发趣味对话（如："哈哈，又被我骗到了吧！"）
- **小丑牌AI**: 赋予"热心助手"性格，失败时鼓励玩家（如："别灰心，再来一次！"）
- **动态对话**: 根据游戏进程和玩家表现变化对话内容

#### 3.2.2 智能提示分层
- **基础提示**: 玩家靠近特殊卡片时，NPC自动高亮提示
- **高级策略**: 玩家主动点击NPC可获取隐藏配对策略（每日限3次）
- **AI误导**: 高难度下AI会故意提供错误提示，增加挑战性

### 3.3 操作优化

#### 3.3.1 响应速度保障
- **触摸延迟**: 确保点击反馈延迟低于0.1秒
- **动画流畅**: 卡片翻转动画时长控制在0.3-0.5秒
- **多点触控**: 支持多点触控，避免误操作

#### 3.3.2 视觉引导优化
- **焦点高亮**: 当前可操作卡片高亮显示
- **状态提示**: 清晰显示游戏状态（匹配中、等待中、游戏结束）
- **进度可视化**: 实时显示配对进度和剩余卡片数量

## 技术实现方案

### 4.1 核心架构设计

#### 4.1.1 模块化架构
- **GameManager**: 游戏核心逻辑管理
- **CardSystem**: 卡片系统和动画管理
- **UIManager**: 用户界面管理
- **AISystem**: AI对手智能系统
- **DataManager**: 数据存储和成就系统

#### 4.1.2 数据流设计
- **单向数据流**: 确保状态管理的清晰性
- **事件驱动**: 使用事件系统解耦模块间通信
- **状态管理**: 统一管理游戏状态和玩家数据

### 4.2 性能优化策略

#### 4.2.1 内存优化
- **对象池**: 卡片对象复用，避免频繁创建销毁
- **资源预加载**: 关键资源提前加载，减少运行时延迟
- **内存监控**: 实时监控内存使用，防止内存泄漏

#### 4.2.2 渲染优化
- **合批渲染**: 相同材质的卡片合并渲染批次
- **LOD技术**: 根据设备性能动态调整渲染质量
- **GPU加速**: 利用GPU处理动画和特效

### 4.3 跨平台适配

#### 4.3.1 平台特性适配
- **微信小程序**: 适配小程序的API限制和性能要求
- **WebGL**: 优化WebGL版本的加载速度和运行性能
- **移动端**: 适配不同屏幕尺寸和操作习惯

#### 4.3.2 设备兼容性
- **分辨率适配**: 自动适配不同设备的分辨率
- **性能分级**: 根据设备性能动态调整游戏复杂度
- **输入适配**: 支持触摸、鼠标等多种输入方式

## 开发计划

### 5.1 游戏盒架构开发计划

#### 第一阶段：游戏盒基础框架（1-2周）
- [ ] 创建游戏盒主界面和导航系统
- [ ] 实现多游戏切换机制
- [ ] 搭建统一的用户数据管理系统
- [ ] 设计游戏盒UI/UX界面

#### 第二阶段：记忆游戏完善（2-3周）
- [ ] 优化神经衰弱记忆游戏体验
- [ ] 实现两种难度模式（嗜血观众、同色扑克）
- [ ] 开发特殊卡片规则系统
- [ ] 完善游戏状态管理和数据存储

#### 第三阶段：扩展游戏集成（2-3周）
- [ ] 预留其他经典游戏集成接口
- [ ] 设计统一的游戏启动器
- [ ] 实现跨游戏进度同步
- [ ] 优化多游戏性能管理

#### 第四阶段：优化完善（1-2周）
- [ ] 添加音效和视觉特效
- [ ] 性能优化和bug修复
- [ ] 用户体验测试和调整
- [ ] 准备发布版本

### 5.2 扩展功能规划

#### 游戏盒扩展计划
- **版本1.1**: 集成扫雷游戏（Minesweeper）
- **版本1.2**: 集成俄罗斯方块（Tetris）
- **版本1.3**: 集成贪吃蛇（Snake）
- **版本1.4**: 集成井字棋（Tic-Tac-Toe）
- **版本1.5**: 集成数独游戏（Sudoku）

#### 平台扩展计划
- **版本2.0**: 微信小程序版本
- **版本2.1**: 移动端App版本
- **版本2.2**: 桌面端Electron版本
- **版本2.3**: 多语言国际化支持

## 风险评估与应对

### 6.1 技术风险
- **性能问题**: 通过对象池和优化策略降低风险
- **兼容性问题**: 提前进行多平台测试
- **开发周期风险**: 采用敏捷开发，分阶段交付

### 6.2 市场风险
- **竞争风险**: 通过独特玩法设计差异化竞争
- **用户接受度**: 通过用户测试收集反馈并迭代优化

## 成功指标

### 7.1 技术指标
- **性能指标**: 60fps稳定运行，加载时间<3秒
- **兼容性指标**: 支持90%以上目标设备
- **稳定性指标**: 崩溃率<0.1%

### 7.2 用户体验指标
- **留存率**: 次日留存率>40%，7日留存率>20%
- **用户评分**: 应用商店评分>4.5分
- **完成率**: 新手引导完成率>85%

---

*文档版本: 1.0*  
*最后更新: 2025-10-21*  
*负责人: 漫游者大人